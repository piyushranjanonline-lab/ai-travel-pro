<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Travel Pro</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  padding:40px;
}

.container{
  max-width:900px;
  margin:auto;
}

/* ===== Animated transport ===== */
.transport-row{
  position:relative;
  height:70px;
  margin-bottom:25px;
}

.route-line{
  position:absolute;
  top:50%;
  left:40px;
  right:40px;
  height:2px;
  background:linear-gradient(to right,transparent,rgba(255,255,255,0.6),transparent);
}

.route-line::after{
  content:"";
  position:absolute;
  width:60px;
  height:2px;
  background:white;
  animation:routeMove 2.5s linear infinite;
}

@keyframes routeMove{
  from{left:-60px}
  to{left:100%}
}

.transport{
  position:absolute;
  top:12px;
  width:42px;
  height:42px;
  animation:move 3s ease-in-out infinite;
}

.transport:nth-child(2){animation-delay:0s}
.transport:nth-child(3){animation-delay:.4s}
.transport:nth-child(4){animation-delay:.8s}

@keyframes move{
  0%{left:0;opacity:.4}
  50%{opacity:1}
  100%{left:calc(100% - 42px);opacity:.4}
}

h1{margin-bottom:20px}

input{
  padding:12px;
  margin:10px 0;
  width:100%;
  border:none;
  border-radius:8px;
}

button{
  padding:12px;
  width:100%;
  border:none;
  border-radius:8px;
  background:black;
  color:white;
  cursor:pointer;
}

.cards{
  margin-top:25px;
  display:grid;
  gap:15px;
}

.card{
  background:rgba(255,255,255,0.15);
  padding:16px;
  border-radius:16px;
}

.book-btn{
  margin-top:10px;
  padding:10px;
  width:100%;
  border:none;
  border-radius:10px;
  background:#ff7e5f;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.book-btn:hover{
  background:#ff5f3c;
}

/* loader */
.loader-container{
  margin-top:20px;
  padding:20px;
  border-radius:16px;
  background:rgba(255,255,255,0.1);
}

.shimmer{
  height:15px;
  width:100%;
  border-radius:8px;
  margin-bottom:12px;
  background:linear-gradient(90deg,
    rgba(255,255,255,0.1) 25%,
    rgba(255,255,255,0.3) 50%,
    rgba(255,255,255,0.1) 75%);
  background-size:200% 100%;
  animation:shimmer 1.5s infinite;
}

@keyframes shimmer{
  0%{background-position:200% 0}
  100%{background-position:-200% 0}
}

/* mobile */
@media(max-width:768px){
  body{padding:15px;}
}
</style>
</head>

<body>

<div class="container">

<div class="transport-row">
  <div class="route-line"></div>
  <img class="transport" src="https://img.icons8.com/ios-filled/100/ffffff/airplane-take-off.png">
  <img class="transport" src="https://img.icons8.com/ios-filled/100/ffffff/train.png">
  <img class="transport" src="https://img.icons8.com/ios-filled/100/ffffff/bus.png">
</div>

<h1>Welcome to Travel Planner by Piyush</h1>

<input id="origin" placeholder="From (e.g. Delhi)">
<input id="destination" placeholder="To (e.g. Mumbai)">

<button onclick="searchTravel()">Find Best Routes</button>

<div id="result"></div>

</div>

<script>

async function searchTravel(){

  const origin=document.getElementById("origin").value;
  const destination=document.getElementById("destination").value;

  if(!origin || !destination){
    document.getElementById("result").innerHTML=
    `<div class="card" style="background:#ff4d4d;">Enter both cities</div>`;
    return;
  }

  document.getElementById("result").innerHTML=`
    <div class="loader-container">
      <div class="shimmer"></div>
      <div class="shimmer"></div>
      <div class="shimmer"></div>
    </div>
  `;

  try{

    const res=await fetch("/travel",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({origin,destination})
    });

    const data=await res.json();
    const obj=JSON.parse(data.result);

    document.getElementById("result").innerHTML=`
    <div class="cards">

      <div class="card">
        <h3>‚úàÔ∏è Flight</h3>
        <p><b>Price:</b> ${obj.flight.price}</p>
        <p><b>Time:</b> ${obj.flight.time}</p>
        <p><b>Book:</b> ${obj.flight.booking}</p>
        <a href="https://www.makemytrip.com/flights/" target="_blank">
          <button class="book-btn">Book Flight</button>
        </a>
      </div>

      <div class="card">
        <h3>üöÜ Train</h3>
        <p><b>Price:</b> ${obj.train.price}</p>
        <p><b>Time:</b> ${obj.train.time}</p>
        <p><b>Book:</b> ${obj.train.booking}</p>
        <a href="https://www.irctc.co.in" target="_blank">
          <button class="book-btn">Book Train</button>
        </a>
      </div>

      <div class="card">
        <h3>üöå Bus</h3>
        <p><b>Price:</b> ${obj.bus.price}</p>
        <p><b>Time:</b> ${obj.bus.time}</p>
        <p><b>Book:</b> ${obj.bus.booking}</p>
        <a href="https://www.redbus.in" target="_blank">
          <button class="book-btn">Book Bus</button>
        </a>
      </div>

    </div>`;
  }
  catch{
    document.getElementById("result").innerHTML=
    `<div class="card" style="background:#ff4d4d;">Server error</div>`;
  }
}

</script>
</body>
</html>